apiVersion: v1
items:
- apiVersion: v1
  data:
    tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    tls.key: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:31:10Z"
    name: csirevproxy-tls-secret
    namespace: powermax
    resourceVersion: "17749593"
    uid: 5193d248-2c59-4bf9-9ac9-24cc166772d4
  type: kubernetes.io/tls
- apiVersion: v1
  data:
    ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    namespace: cG93ZXJtYXg=
    token: ZmFrZVRva2Vu
  kind: Secret
  metadata:
    annotations:
      kubernetes.io/service-account.name: default
      kubernetes.io/service-account.uid: fa63af8f-ad5b-436b-b078-d1bde5855846
    creationTimestamp: "2021-09-23T04:31:07Z"
    name: default-token-4sj57
    namespace: powermax
    resourceVersion: "17749583"
    uid: 0fc2a525-24b3-453b-a63e-57ffb6d49c5e
  type: kubernetes.io/service-account-token
- apiVersion: v1
  data:
    ca_cert.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:31:11Z"
    name: powermax-certs
    namespace: powermax
    resourceVersion: "17749595"
    uid: 6fb8d6cf-e45c-4564-b006-6949004d5048
  type: Opaque
- apiVersion: v1
  data:
    ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    namespace: cG93ZXJtYXg=
    token: ZmFrZVRva2Vu
  kind: Secret
  metadata:
    annotations:
      kubernetes.io/service-account.name: powermax-controller
      kubernetes.io/service-account.uid: 4490c4c1-b5b3-46aa-bf17-7133581a077a
    creationTimestamp: "2021-09-23T04:31:15Z"
    name: powermax-controller-token-7th5h
    namespace: powermax
    resourceVersion: "17749619"
    uid: cfc656cc-106b-4b39-bac5-fd0ad78f018d
  type: kubernetes.io/service-account-token
- apiVersion: v1
  data:
    password: YWRtaW4K
    username: YWRtaW4K
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:31:10Z"
    name: powermax-creds
    namespace: powermax
    resourceVersion: "17749594"
    uid: e3427ee7-b7db-4d38-b703-cebbf7ef8e37
  type: Opaque
- apiVersion: v1
  data:
    release: ZmFrZVRva2Vu
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:31:15Z"
    labels:
      modifiedAt: "1632385853"
      name: powermax
      owner: helm
      status: deployed
      version: "1"
    name: sh.helm.release.v1.powermax.v1
    namespace: powermax
    resourceVersion: "17749629"
    uid: feeade19-eb57-4371-96dc-db006fc247a1
  type: helm.sh/release.v1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:31:15Z"
    generation: 1
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-controller
    namespace: powermax
    resourceVersion: "17749765"
    uid: f9d04f41-41e7-45c9-a370-0539fe2a6f91
  spec:
    progressDeadlineSeconds: 600
    replicas: 2
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        name: powermax-controller
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: powermax-controller
      spec:
        affinity:
          podAntiAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                - key: name
                  operator: In
                  values:
                  - powermax-controller
              topologyKey: kubernetes.io/hostname
        containers:
        - args:
          - --csi-address=$(ADDRESS)
          - --v=5
          - --timeout=180s
          - --worker-threads=6
          - --leader-election
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-attacher:v3.3.0
          imagePullPolicy: IfNotPresent
          name: attacher
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --csi-address=$(ADDRESS)
          - --volume-name-prefix=pmax
          - --volume-name-uuid-length=10
          - --timeout=180s
          - --worker-threads=6
          - --v=5
          - --default-fstype=ext4
          - --leader-election
          - --extra-create-metadata
          - --feature-gates=Topology=true
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-provisioner:v2.2.2
          imagePullPolicy: IfNotPresent
          name: provisioner
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --csi-address=$(ADDRESS)
          - --v=5
          - --snapshot-name-prefix=pmsn
          - --snapshot-name-uuid-length=10
          - --timeout=180s
          - --leader-election
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-snapshotter:v4.1.1
          imagePullPolicy: IfNotPresent
          name: snapshotter
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --csi-address=$(ADDRESS)
          - --timeout=180s
          - --v=5
          - --leader-election
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-resizer:v1.2.0
          imagePullPolicy: IfNotPresent
          name: resizer
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --leader-election
          command:
          - /csi-powermax.sh
          env:
          - name: X_CSI_POWERMAX_DRIVER_NAME
            value: csi-powermax.dellemc.com
          - name: CSI_ENDPOINT
            value: /var/run/csi/csi.sock
          - name: X_CSI_MODE
            value: controller
          - name: X_CSI_MANAGED_ARRAYS
            value: "1234567"
          - name: X_CSI_POWERMAX_ENDPOINT
            value: https://0.0.0.0:8443
          - name: X_CSI_POWERMAX_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: powermax-creds
          - name: X_CSI_POWERMAX_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: powermax-creds
          - name: X_CSI_POWERMAX_CONFIG_PATH
            value: /powermax-config-params/driver-config-params.yaml
          - name: X_CSI_POWERMAX_DEBUG
            value: "false"
          - name: X_CSI_POWERMAX_SKIP_CERTIFICATE_VALIDATION
            value: "true"
          - name: X_CSI_POWERMAX_PROXY_SERVICE_NAME
            value: none
          - name: X_CSI_POWERMAX_PORTGROUPS
            value: iscsi_csm_cicd
          - name: X_CSI_K8S_CLUSTER_PREFIX
            value: CSM
          - name: X_CSI_GRPC_MAX_THREADS
            value: "4"
          - name: X_CSI_TRANSPORT_PROTOCOL
          - name: SSL_CERT_DIR
            value: /certs
          - name: X_CSI_IG_NODENAME_TEMPLATE
          - name: X_CSI_IG_MODIFY_HOSTNAME
            value: "false"
          - name: X_CSI_REPLICATION_CONTEXT_PREFIX
            value: powermax
          - name: X_CSI_REPLICATION_PREFIX
            value: replication.storage.dell.com
          - name: X_CSI_UNISPHERE_TIMEOUT
            value: 5m
          image: vmadurprd01.cec.lab.emc.com:5000/vmax-docker-snapshots/vmax-docker/csi-plugin/csi-powermax:v2.0.0.407X
          imagePullPolicy: IfNotPresent
          name: driver
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
          - mountPath: /certs
            name: certs
            readOnly: true
          - mountPath: /powermax-config-params
            name: powermax-config-params
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: powermax-controller
        serviceAccountName: powermax-controller
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: socket-dir
        - name: certs
          secret:
            defaultMode: 420
            optional: true
            secretName: powermax-certs
        - configMap:
            defaultMode: 420
            name: powermax-reverseproxy-config
            optional: true
          name: configmap-volume
        - name: tls-secret
          secret:
            defaultMode: 420
            secretName: csirevproxy-tls-secret
        - emptyDir: {}
          name: cert-dir
        - configMap:
            defaultMode: 420
            name: powermax-config-params
          name: powermax-config-params
  status:
    availableReplicas: 2
    conditions:
    - lastTransitionTime: "2021-09-23T04:31:25Z"
      lastUpdateTime: "2021-09-23T04:31:25Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2021-09-23T04:31:15Z"
      lastUpdateTime: "2021-09-23T04:31:25Z"
      message: ReplicaSet "powermax-controller-5b6dfd558f" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 2
    replicas: 2
    updatedReplicas: 2
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "1"
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:31:15Z"
    generation: 1
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-node
    namespace: powermax
    resourceVersion: "17749762"
    uid: bd494f6a-edc1-4b41-b5e3-b1c87b3c2868
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: powermax-node
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: powermax-node
      spec:
        containers:
        - command:
          - /csi-powermax.sh
          env:
          - name: X_CSI_POWERMAX_DRIVER_NAME
            value: csi-powermax.dellemc.com
          - name: CSI_ENDPOINT
            value: unix:///var/lib/kubelet/plugins/powermax.emc.dell.com/csi_sock
          - name: X_CSI_MODE
            value: node
          - name: X_CSI_PRIVATE_MOUNT_DIR
            value: /var/lib/kubelet/plugins/powermax.emc.dell.com/disks
          - name: X_CSI_MANAGED_ARRAYS
            value: "1234567"
          - name: X_CSI_POWERMAX_ENDPOINT
            value: https://0.0.0.0:8443
          - name: X_CSI_POWERMAX_DEBUG
            value: "false"
          - name: X_CSI_POWERMAX_SKIP_CERTIFICATE_VALIDATION
            value: "true"
          - name: X_CSI_K8S_CLUSTER_PREFIX
            value: CSM
          - name: X_CSI_POWERMAX_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: powermax-creds
          - name: X_CSI_POWERMAX_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: powermax-creds
          - name: X_CSI_POWERMAX_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: X_CSI_POWERMAX_ISCSI_ENABLE_CHAP
            value: "false"
          - name: X_CSI_POWERMAX_PROXY_SERVICE_NAME
            value: none
          - name: X_CSI_ISCSI_CHROOT
            value: /noderoot
          - name: X_CSI_GRPC_MAX_THREADS
            value: "4"
          - name: X_CSI_TRANSPORT_PROTOCOL
          - name: SSL_CERT_DIR
            value: /certs
          - name: X_CSI_POWERMAX_CONFIG_PATH
            value: /powermax-config-params/driver-config-params.yaml
          - name: X_CSI_IG_NODENAME_TEMPLATE
          - name: X_CSI_IG_MODIFY_HOSTNAME
            value: "false"
          - name: X_CSI_POWERMAX_PORTGROUPS
            value: iscsi_csm_cicd
          image: vmadurprd01.cec.lab.emc.com:5000/vmax-docker-snapshots/vmax-docker/csi-plugin/csi-powermax:v2.0.0.407X
          imagePullPolicy: IfNotPresent
          name: driver
          resources: {}
          securityContext:
            allowPrivilegeEscalation: true
            capabilities:
              add:
              - SYS_ADMIN
            privileged: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/kubelet/plugins/powermax.emc.dell.com
            name: driver-path
          - mountPath: /var/lib/kubelet/plugins/kubernetes.io/csi/volumeDevices
            mountPropagation: Bidirectional
            name: volumedevices-path
          - mountPath: /var/lib/kubelet/pods
            mountPropagation: Bidirectional
            name: pods-path
          - mountPath: /dev
            name: dev
          - mountPath: /sys
            name: sys
          - mountPath: /noderoot
            name: noderoot
          - mountPath: /certs
            name: certs
            readOnly: true
          - mountPath: /run/dbus/system_bus_socket
            name: dbus-socket
          - mountPath: /powermax-config-params
            name: powermax-config-params
        - args:
          - --v=5
          - --csi-address=$(ADDRESS)
          - --kubelet-registration-path=/var/lib/kubelet/plugins/powermax.emc.dell.com/csi_sock
          env:
          - name: ADDRESS
            value: /csi/csi_sock
          - name: KUBE_NODE_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          image: k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.3.0
          imagePullPolicy: IfNotPresent
          name: registrar
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /registration
            name: registration-dir
          - mountPath: /csi
            name: driver-path
        dnsPolicy: ClusterFirstWithHostNet
        hostIPC: true
        hostNetwork: true
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/memory-pressure
          operator: Exists
        - effect: NoExecute
          key: node.kubernetes.io/disk-pressure
          operator: Exists
        - effect: NoExecute
          key: node.kubernetes.io/network-unavailable
          operator: Exists
        volumes:
        - hostPath:
            path: /var/lib/kubelet/plugins_registry/
            type: DirectoryOrCreate
          name: registration-dir
        - hostPath:
            path: /var/lib/kubelet/plugins/powermax.emc.dell.com
            type: DirectoryOrCreate
          name: driver-path
        - hostPath:
            path: /var/lib/kubelet/plugins/kubernetes.io/csi/volumeDevices
            type: DirectoryOrCreate
          name: volumedevices-path
        - hostPath:
            path: /var/lib/kubelet/pods
            type: Directory
          name: pods-path
        - hostPath:
            path: /dev
            type: Directory
          name: dev
        - hostPath:
            path: /sys
            type: Directory
          name: sys
        - hostPath:
            path: /
            type: Directory
          name: noderoot
        - hostPath:
            path: /run/dbus/system_bus_socket
            type: Socket
          name: dbus-socket
        - configMap:
            defaultMode: 420
            name: powermax-config-params
          name: powermax-config-params
        - name: certs
          secret:
            defaultMode: 420
            optional: true
            secretName: powermax-certs
    updateStrategy:
      rollingUpdate:
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 2
    desiredNumberScheduled: 2
    numberAvailable: 2
    numberMisscheduled: 0
    numberReady: 2
    observedGeneration: 1
    updatedNumberScheduled: 2
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      fake cert
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2021-09-23T04:31:07Z"
    name: kube-root-ca.crt
    namespace: powermax
    resourceVersion: "17749581"
    uid: f8cf8f78-53a2-4f37-97dc-ba3a774a77fb
- apiVersion: v1
  data:
    driver-config-params.yaml: |
      CSI_LOG_LEVEL: debug
      CSI_LOG_FORMAT: TEXT
  kind: ConfigMap
  metadata:
    annotations:
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:31:15Z"
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-config-params
    namespace: powermax
    resourceVersion: "17749618"
    uid: f4005d67-92a6-4bdd-87f0-48e4e34c6f04
kind: List
metadata:
  resourceVersion: ""
  selfLink: ""