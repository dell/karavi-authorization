apiVersion: v1
items:
- apiVersion: v1
  data:
    tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    tls.key: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:57:06Z"
    name: csirevproxy-tls-secret
    namespace: powermax
    resourceVersion: "17757320"
    uid: 4799e945-73f2-4618-808e-ba470e665497
  type: kubernetes.io/tls
- apiVersion: v1
  data:
    ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    namespace: cG93ZXJtYXg=
    token: ZmFrZVRva2Vu
  kind: Secret
  metadata:
    annotations:
      kubernetes.io/service-account.name: default
      kubernetes.io/service-account.uid: 69e29d9d-72ba-4b76-82c9-a1bef44d9d59
    creationTimestamp: "2021-09-23T04:57:03Z"
    name: default-token-rmwt6
    namespace: powermax
    resourceVersion: "17757309"
    uid: 01fe7467-9bb7-4b8d-a553-8c353480654c
  type: kubernetes.io/service-account-token
- apiVersion: v1
  data:
    ca_cert.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:57:07Z"
    name: powermax-certs
    namespace: powermax
    resourceVersion: "17757324"
    uid: 6ff69eac-0644-4f83-9ea4-f97db4eef7aa
  type: Opaque
- apiVersion: v1
  data:
    ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    namespace: cG93ZXJtYXg=
    token: ZmFrZVRva2Vu
  kind: Secret
  metadata:
    annotations:
      kubernetes.io/service-account.name: powermax-controller
      kubernetes.io/service-account.uid: a68e39c0-2d34-41ff-aa5b-759c53f46227
    creationTimestamp: "2021-09-23T04:57:11Z"
    name: powermax-controller-token-cr8vv
    namespace: powermax
    resourceVersion: "17757350"
    uid: a8cbd80a-7ac7-48b6-bec1-3b760b802f01
  type: kubernetes.io/service-account-token
- apiVersion: v1
  data:
    password: YWRtaW4K
    username: YWRtaW4K
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:57:07Z"
    name: powermax-creds
    namespace: powermax
    resourceVersion: "17757323"
    uid: 734951f6-3550-4bbb-88fc-2e779c148d40
  type: Opaque
- apiVersion: v1
  data:
    ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCmZha2UgY2VydAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    namespace: cG93ZXJtYXg=
    token: ZmFrZVRva2Vu
  kind: Secret
  metadata:
    annotations:
      kubernetes.io/service-account.name: powermax-reverseproxy
      kubernetes.io/service-account.uid: 5d6ff6a7-ac00-4433-b381-9c3f69b36b2d
    creationTimestamp: "2021-09-23T04:57:11Z"
    name: powermax-reverseproxy-token-mlqbb
    namespace: powermax
    resourceVersion: "17757348"
    uid: 888962ba-938a-4962-88bb-351dfc12934c
  type: kubernetes.io/service-account-token
- apiVersion: v1
  data:
    release: ZmFrZVRva2Vu
  kind: Secret
  metadata:
    creationTimestamp: "2021-09-23T04:57:11Z"
    labels:
      modifiedAt: "1632387409"
      name: powermax
      owner: helm
      status: deployed
      version: "1"
    name: sh.helm.release.v1.powermax.v1
    namespace: powermax
    resourceVersion: "17757392"
    uid: f3c075be-b016-4907-ba0e-feb96d0a7304
  type: helm.sh/release.v1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:57:11Z"
    generation: 1
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-controller
    namespace: powermax
    resourceVersion: "17757676"
    uid: c9a21f53-f044-405c-b5be-c5f2917adf36
  spec:
    progressDeadlineSeconds: 600
    replicas: 2
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        name: powermax-controller
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: powermax-controller
      spec:
        affinity:
          podAntiAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                - key: name
                  operator: In
                  values:
                  - powermax-controller
              topologyKey: kubernetes.io/hostname
        containers:
        - args:
          - --csi-address=$(ADDRESS)
          - --v=5
          - --timeout=180s
          - --worker-threads=6
          - --leader-election
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-attacher:v3.3.0
          imagePullPolicy: IfNotPresent
          name: attacher
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --csi-address=$(ADDRESS)
          - --volume-name-prefix=pmax
          - --volume-name-uuid-length=10
          - --timeout=180s
          - --worker-threads=6
          - --v=5
          - --default-fstype=ext4
          - --leader-election
          - --extra-create-metadata
          - --feature-gates=Topology=true
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-provisioner:v2.2.2
          imagePullPolicy: IfNotPresent
          name: provisioner
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --csi-address=$(ADDRESS)
          - --v=5
          - --snapshot-name-prefix=pmsn
          - --snapshot-name-uuid-length=10
          - --timeout=180s
          - --leader-election
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-snapshotter:v4.1.1
          imagePullPolicy: IfNotPresent
          name: snapshotter
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --csi-address=$(ADDRESS)
          - --timeout=180s
          - --v=5
          - --leader-election
          env:
          - name: ADDRESS
            value: /var/run/csi/csi.sock
          image: k8s.gcr.io/sig-storage/csi-resizer:v1.2.0
          imagePullPolicy: IfNotPresent
          name: resizer
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
        - args:
          - --leader-election
          command:
          - /csi-powermax.sh
          env:
          - name: X_CSI_POWERMAX_DRIVER_NAME
            value: csi-powermax.dellemc.com
          - name: CSI_ENDPOINT
            value: /var/run/csi/csi.sock
          - name: X_CSI_MODE
            value: controller
          - name: X_CSI_MANAGED_ARRAYS
            value: "1234567"
          - name: X_CSI_POWERMAX_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: powermax-creds
          - name: X_CSI_POWERMAX_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: powermax-creds
          - name: X_CSI_POWERMAX_CONFIG_PATH
            value: /powermax-config-params/driver-config-params.yaml
          - name: X_CSI_POWERMAX_DEBUG
            value: "false"
          - name: X_CSI_POWERMAX_SKIP_CERTIFICATE_VALIDATION
            value: "true"
          - name: X_CSI_POWERMAX_PROXY_SERVICE_NAME
            value: powermax-reverseproxy
          - name: X_CSI_POWERMAX_PORTGROUPS
            value: iscsi_csm_cicd
          - name: X_CSI_K8S_CLUSTER_PREFIX
            value: CSM
          - name: X_CSI_GRPC_MAX_THREADS
            value: "50"
          - name: X_CSI_TRANSPORT_PROTOCOL
          - name: SSL_CERT_DIR
            value: /certs
          - name: X_CSI_IG_NODENAME_TEMPLATE
          - name: X_CSI_IG_MODIFY_HOSTNAME
            value: "false"
          - name: X_CSI_REPLICATION_CONTEXT_PREFIX
            value: powermax
          - name: X_CSI_REPLICATION_PREFIX
            value: replication.storage.dell.com
          - name: X_CSI_UNISPHERE_TIMEOUT
            value: 5m
          image: vmadurprd01.cec.lab.emc.com:5000/vmax-docker-snapshots/vmax-docker/csi-plugin/csi-powermax:v2.0.0.407X
          imagePullPolicy: IfNotPresent
          name: driver
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/csi
            name: socket-dir
          - mountPath: /certs
            name: certs
            readOnly: true
          - mountPath: /powermax-config-params
            name: powermax-config-params
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: powermax-controller
        serviceAccountName: powermax-controller
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: socket-dir
        - name: certs
          secret:
            defaultMode: 420
            optional: true
            secretName: powermax-certs
        - configMap:
            defaultMode: 420
            name: powermax-reverseproxy-config
            optional: true
          name: configmap-volume
        - name: tls-secret
          secret:
            defaultMode: 420
            secretName: csirevproxy-tls-secret
        - emptyDir: {}
          name: cert-dir
        - configMap:
            defaultMode: 420
            name: powermax-config-params
          name: powermax-config-params
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2021-09-23T04:57:12Z"
      lastUpdateTime: "2021-09-23T04:57:15Z"
      message: ReplicaSet "powermax-controller-689f4dccf5" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2021-09-23T04:57:56Z"
      lastUpdateTime: "2021-09-23T04:57:56Z"
      message: Deployment does not have minimum availability.
      reason: MinimumReplicasUnavailable
      status: "False"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 2
    unavailableReplicas: 1
    updatedReplicas: 2
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:57:11Z"
    generation: 1
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-reverseproxy
    namespace: powermax
    resourceVersion: "17757493"
    uid: 328ad7a8-a100-4198-92d5-57ce48184de3
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        name: powermax-reverseproxy
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: powermax-reverseproxy
      spec:
        containers:
        - env:
          - name: X_CSI_REVPROXY_CONFIG_DIR
            value: /etc/config/configmap
          - name: X_CSI_REVPROXY_CONFIG_FILE_NAME
            value: config.yaml
          - name: X_CSI_REVRPOXY_IN_CLUSTER
            value: "true"
          - name: X_CSI_REVPROXY_TLS_CERT_DIR
            value: /app/tls
          - name: X_CSI_REVPROXY_WATCH_NAMESPACE
            value: powermax
          image: vmadurprd01.cec.lab.emc.com:5000/vmax-docker-snapshots/vmax-docker/csi-plugin/csipowermax-reverseproxy:v2.0.0.407X
          imagePullPolicy: Always
          name: csireverseproxy
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/config/configmap
            name: configmap-volume
          - mountPath: /app/tls
            name: tls-secret
          - mountPath: /app/certs
            name: cert-dir
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: powermax-reverseproxy
        serviceAccountName: powermax-reverseproxy
        terminationGracePeriodSeconds: 30
        volumes:
        - configMap:
            defaultMode: 420
            name: powermax-reverseproxy-config
            optional: true
          name: configmap-volume
        - name: tls-secret
          secret:
            defaultMode: 420
            secretName: csirevproxy-tls-secret
        - emptyDir: {}
          name: cert-dir
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2021-09-23T04:57:16Z"
      lastUpdateTime: "2021-09-23T04:57:16Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2021-09-23T04:57:11Z"
      lastUpdateTime: "2021-09-23T04:57:16Z"
      message: ReplicaSet "powermax-reverseproxy-64cd6f79f5" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "1"
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:57:11Z"
    generation: 1
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-node
    namespace: powermax
    resourceVersion: "17757470"
    uid: a9b465fe-af27-40a1-8702-65a832f486e8
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: powermax-node
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: powermax-node
      spec:
        containers:
        - command:
          - /csi-powermax.sh
          env:
          - name: X_CSI_POWERMAX_DRIVER_NAME
            value: csi-powermax.dellemc.com
          - name: CSI_ENDPOINT
            value: unix:///var/lib/kubelet/plugins/powermax.emc.dell.com/csi_sock
          - name: X_CSI_MODE
            value: node
          - name: X_CSI_PRIVATE_MOUNT_DIR
            value: /var/lib/kubelet/plugins/powermax.emc.dell.com/disks
          - name: X_CSI_MANAGED_ARRAYS
            value: "1234567"
          - name: X_CSI_POWERMAX_DEBUG
            value: "false"
          - name: X_CSI_POWERMAX_SKIP_CERTIFICATE_VALIDATION
            value: "true"
          - name: X_CSI_K8S_CLUSTER_PREFIX
            value: CSM
          - name: X_CSI_POWERMAX_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: powermax-creds
          - name: X_CSI_POWERMAX_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: powermax-creds
          - name: X_CSI_POWERMAX_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: X_CSI_POWERMAX_ISCSI_ENABLE_CHAP
            value: "false"
          - name: X_CSI_POWERMAX_PROXY_SERVICE_NAME
            value: powermax-reverseproxy
          - name: X_CSI_ISCSI_CHROOT
            value: /noderoot
          - name: X_CSI_GRPC_MAX_THREADS
            value: "50"
          - name: X_CSI_TRANSPORT_PROTOCOL
          - name: SSL_CERT_DIR
            value: /certs
          - name: X_CSI_POWERMAX_CONFIG_PATH
            value: /powermax-config-params/driver-config-params.yaml
          - name: X_CSI_IG_NODENAME_TEMPLATE
          - name: X_CSI_IG_MODIFY_HOSTNAME
            value: "false"
          - name: X_CSI_POWERMAX_PORTGROUPS
            value: iscsi_csm_cicd
          image: vmadurprd01.cec.lab.emc.com:5000/vmax-docker-snapshots/vmax-docker/csi-plugin/csi-powermax:v2.0.0.407X
          imagePullPolicy: IfNotPresent
          name: driver
          resources: {}
          securityContext:
            allowPrivilegeEscalation: true
            capabilities:
              add:
              - SYS_ADMIN
            privileged: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/kubelet/plugins/powermax.emc.dell.com
            name: driver-path
          - mountPath: /var/lib/kubelet/plugins/kubernetes.io/csi/volumeDevices
            mountPropagation: Bidirectional
            name: volumedevices-path
          - mountPath: /var/lib/kubelet/pods
            mountPropagation: Bidirectional
            name: pods-path
          - mountPath: /dev
            name: dev
          - mountPath: /sys
            name: sys
          - mountPath: /noderoot
            name: noderoot
          - mountPath: /certs
            name: certs
            readOnly: true
          - mountPath: /run/dbus/system_bus_socket
            name: dbus-socket
          - mountPath: /powermax-config-params
            name: powermax-config-params
        - args:
          - --v=5
          - --csi-address=$(ADDRESS)
          - --kubelet-registration-path=/var/lib/kubelet/plugins/powermax.emc.dell.com/csi_sock
          env:
          - name: ADDRESS
            value: /csi/csi_sock
          - name: KUBE_NODE_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          image: k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.3.0
          imagePullPolicy: IfNotPresent
          name: registrar
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /registration
            name: registration-dir
          - mountPath: /csi
            name: driver-path
        dnsPolicy: ClusterFirstWithHostNet
        hostIPC: true
        hostNetwork: true
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoExecute
          key: node.kubernetes.io/memory-pressure
          operator: Exists
        - effect: NoExecute
          key: node.kubernetes.io/disk-pressure
          operator: Exists
        - effect: NoExecute
          key: node.kubernetes.io/network-unavailable
          operator: Exists
        volumes:
        - hostPath:
            path: /var/lib/kubelet/plugins_registry/
            type: DirectoryOrCreate
          name: registration-dir
        - hostPath:
            path: /var/lib/kubelet/plugins/powermax.emc.dell.com
            type: DirectoryOrCreate
          name: driver-path
        - hostPath:
            path: /var/lib/kubelet/plugins/kubernetes.io/csi/volumeDevices
            type: DirectoryOrCreate
          name: volumedevices-path
        - hostPath:
            path: /var/lib/kubelet/pods
            type: Directory
          name: pods-path
        - hostPath:
            path: /dev
            type: Directory
          name: dev
        - hostPath:
            path: /sys
            type: Directory
          name: sys
        - hostPath:
            path: /
            type: Directory
          name: noderoot
        - hostPath:
            path: /run/dbus/system_bus_socket
            type: Socket
          name: dbus-socket
        - configMap:
            defaultMode: 420
            name: powermax-config-params
          name: powermax-config-params
        - name: certs
          secret:
            defaultMode: 420
            optional: true
            secretName: powermax-certs
    updateStrategy:
      rollingUpdate:
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 2
    desiredNumberScheduled: 2
    numberAvailable: 2
    numberMisscheduled: 0
    numberReady: 2
    observedGeneration: 1
    updatedNumberScheduled: 2
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      fake cert
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2021-09-23T04:57:03Z"
    name: kube-root-ca.crt
    namespace: powermax
    resourceVersion: "17757307"
    uid: 4b4a8457-14ba-4c7a-9089-875903ae14ca
- apiVersion: v1
  data:
    driver-config-params.yaml: |
      CSI_LOG_LEVEL: debug
      CSI_LOG_FORMAT: TEXT
  kind: ConfigMap
  metadata:
    annotations:
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:57:11Z"
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-config-params
    namespace: powermax
    resourceVersion: "17757353"
    uid: a9175e62-047a-422c-868f-06a8ca3a72cc
- apiVersion: v1
  data:
    config.yaml: |
      mode: StandAlone
      port: 2222
      logLevel: debug
      logFormat: TEXT
      standAloneConfig:
        storageArrays:
          - storageArrayId: 1234567
            primaryURL: https://0.0.0.0:8443
            backupURL: ""
            proxyCredentialSecrets:
              - powermax-creds
        managementServers:
          - url: https://0.0.0.0:8443
            arrayCredentialSecret: powermax-creds
            skipCertificateValidation: true
            certSecret: ""
            limits:
              maxActiveRead: 5
              maxActiveWrite: 5
              maxOutStandingRead: 50
              maxOutStandingWrite: 50
  kind: ConfigMap
  metadata:
    annotations:
      meta.helm.sh/release-name: powermax
      meta.helm.sh/release-namespace: powermax
    creationTimestamp: "2021-09-23T04:57:11Z"
    labels:
      app.kubernetes.io/managed-by: Helm
    name: powermax-reverseproxy-config
    namespace: powermax
    resourceVersion: "17757349"
    uid: 974dac55-d98b-4784-9543-04e3f2327c92
kind: List
metadata:
  resourceVersion: ""
  selfLink: ""